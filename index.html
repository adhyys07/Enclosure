<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Enclosure â€” Hack Club YSWS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="/assets/favicon.png">
  <script>
    function loadApp() {
      const script = document.createElement("script");
      script.type = "module";
      script.src = "/src/main.tsx";
      document.body.appendChild(script);
    }

    window.addEventListener("DOMContentLoaded", loadApp);
  </script>
</head>
<body>
  <div id="root"></div>
  <button id="auth-btn" style="position:fixed;top:16px;right:16px;z-index:999;font-size:1.1rem;padding:10px 18px;border-radius:8px;background:#fca5a5;color:#222;border:none;cursor:pointer;">Authenticate with Hack Club</button>
  <script>
    document.getElementById("auth-btn").addEventListener("click", function() {
      const API_BASE = (() => {
        const url = new URL(window.location.href);
        if (url.hostname === "localhost" || url.hostname === "127.0.0.1") {
          return "http://localhost:4000";
        }
        return url.origin;
      })();
      const continueUrl = encodeURIComponent(window.location.href);
      window.location.href = `${API_BASE}/api/auth/login?continue=${continueUrl}`;
    });
  </script>
</body>
</html>
